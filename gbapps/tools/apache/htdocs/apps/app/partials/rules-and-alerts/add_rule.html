<div class="container-fluid padding-0 gb-add-rule" ng-controller="AddRuleCtrl">
    <div class="page-loader-white-gb" ng-show="info.categoriesLoading">
        <div class="page-loader-body">
            <div class="rect rect1"></div>
            <div class="rect rect2"></div>
            <div class="rect rect3"></div>
            <div class="rect rect4"></div>
            <div class="rect rect5"></div>
        </div>
    </div>
    <div class="row-fluid" ng-hide="info.categoriesLoading">
        <div class="col-sm-12 gb-add-edit-rule-title-panel">
            <div class="gb-title-bar-banner">
                <div class="gb-title-bar-banner-content" ng-class="{'gb-animate-addEdit-Rule-banner':!info.categoriesLoading}">
                    <span>{{info.pageLabel}}</span>
                </div>
            </div>
            <div class="gb-rules-msg-block" ng-if="!!info.addRuleMsg['type']" gb-outside-click="clearMessage()">
                <div class="alert text-align-center" ng-class="{'alert-success': info.addRuleMsg['type'] == 'success', 'alert-danger': info.addRuleMsg['type'] == 'failure'}" ng-bind-html="renderHtml(info.addRuleMsg['msg'])"></div>
            </div>
            <span id="gb-tour-add-edit-rule-title-panel-version" class="gb-add-edit-rule-title-panel-version" ng-show="info.ruleCurrentVersion" ng-class="{'gb-animate-me':!info.categoriesLoading}">Version&nbsp;&nbsp;{{info.ruleCurrentVersion}}</span>
            <!-- <span class="gb-add-edit-rule-title-panel-label">{{info.pageLabel}}</span>
            <span id="gb-tour-add-edit-rule-title-panel-version" class="gb-add-edit-rule-title-panel-version" ng-show="info.ruleCurrentVersion">Version&nbsp;&nbsp;{{info.ruleCurrentVersion}}</span> -->
        </div>
    </div>
    <!-- <div class="help-me-container">
        <enable-context-help></enable-context-help>
    </div> -->
    <div class="row-fluid" ng-hide="info.categoriesLoading">
        <div class="col-sm-12">
            <div class="gb-rules-container">
                <div class="gb-rules-tree-view" id="gbTourAddRulesAttributeTree">
                    <div class="gb-rules-tree-heading">
                        <span>{{rulesconstants['ATTR_LIST']}}</span>
                        <!-- <span class="pull-right gb-opacity-50-per">{{info.attributeLimit < info.attributes.length ? info.attributeLimit : info.attributes.length}}/{{info.attributes.length}}</span> -->
                    </div>
                    <div class="searchAttributes" ng-hide="info.sectionsLoading">
                        <form ng-submit="searchAttr()">
                            <span class="glyphicon glyphicon-search form-control-feedback"></span>
                            <input id="addRuleAttrSearch" ng-change="addRuleAttrSearchChange()" type="text" placeholder="Search attribute" ng-model="addRuleAttrSearch">
                        </form>
                        <button title="Clear" ng-click="clearSearchText()" ng-disabled="checkSearchText()" class="addRuleAttrSearchClearBtn"><i class="fa fa-arrow-left"></i></button>
                    </div>
                    <div class="gb-rules-tree-content gb-custom_scroll-bar" id="treeContainer">
                        <div ng-show="info.sectionsLoading" class="text-align-center font-size-10">{{rulesconstants['PLEASE_WAIT']}}</div>
                        <div class="gb-facet-loader" ng-show="info.sectionsLoading" >
                            <div class="gb-facet-loader-body">
                                <div class="box"></div>
                                <div class="box"></div>
                                <div class="box"></div>
                                <div class="box"></div>
                            </div>
                        </div>
                        <div ng-hide="info.sectionsLoading">
                            <!-- <div>
                                <span><a class="gb-rules-expand-all-link" ng-click="attributeExpandCollapse()">{{info.allExpanded ? 'Collapse All' : 'Expand All'}}</a></span>
                            </div> -->
                            <div class="gb-rules-tree-structure font-size-10">
                                <span ng-show="NoAttrSearch">{{rulesconstants['NO_RESULTS']}}</span>
                                <ul>
                                    <li ng-repeat="attribute in info.attributes track by $index" id="section-{{attribute.table_name}}" ng-class="{'gb-rules-highlighted-section': attribute.highlighted}">
                                        <span class="gb-rules-expand-icon cursor-pointer" ng-class="{'icon-minus': !!attribute.expanded, 'icon-plus': !attribute.expanded}" ng-click="attribute.expanded = !attribute.expanded; expandSection(attribute)"></span>
                                        <span class="font-weight-bold cursor-pointer gb-rules-attribute-title">{{attribute.label}}</span>
                                        <div ng-show="attribute.loading" class="loading-small height-18 padding-top-0"></div>
                                        <ul class="searchResults" ng-show="!attribute.loading && !attribute.expanded && ifSearched">
                                            <li class="foundAttr" ng-repeat="foundAttr in attribute.foundAttr">
                                                <span class="drag-object gb-rules-attribute-value" ng-dblclick="addLogicText([attribute.label, {name: foundAttr.column_name, label: foundAttr.label, type: foundAttr.dataType}])"><mark>{{foundAttr.label}}</mark><span ng-drag="true" ng-drag-data="[attribute.label, {name: foundAttr.column_name, label: foundAttr.label, type: foundAttr.dataType}]"></span></span>
                                                <span title="Integer attribute" ng-if="foundAttr.dataType == info.columnDataTypes['Integer'] || foundAttr.dataType == info.columnDataTypes['Long'] || foundAttr.dataType == info.columnDataTypes['Float'] || foundAttr.dataType == info.columnDataTypes['Double']" class="gb-rules-int-type">int</span>
                                            </li>
                                        </ul>
                                        <ul class="gb-rules-tree-child" ng-show="!attribute.loading && !!attribute.expanded">
                                        	<li ng-if="!!attribute.hasGlobal"><b><i>{{rulesconstants['GLOBAL_ATTR']}}</i></b></li>
                                            <li ng-repeat="column in attribute.columns | filter : {solr_facet: 'G'} track by $index" ng-if="column.attribute_label != null && column.attribute_label != ''">
                                                <span class="drag-object gb-rules-attribute-value" ng-dblclick="addLogicText([attribute.label, {name: column.column_name, label: column.attribute_label, type: column.type}])">
                                                    {{column.attribute_label}}
                                                    <span ng-drag="true" ng-drag-data="[attribute.label, {name: column.column_name, label: column.attribute_label, type: column.type}]"></span>
                                                </span>&nbsp;<span title="Integer attribute" ng-if="column.type == info.columnDataTypes['Integer'] || column.type == info.columnDataTypes['Long'] || column.type == info.columnDataTypes['Float'] || column.type == info.columnDataTypes['Double']" class="gb-rules-int-type">int</span>
                                            </li>
                                            <li ng-if="!!attribute.hasLocal"><b><i>{{rulesconstants['OTHER_ATTR']}}</i></b></li>
                                            <li ng-repeat="column in attribute.columns | filter : {solr_facet: '!G'} track by $index" ng-if="column.attribute_label != null && column.attribute_label != ''">
                                                <span class="drag-object gb-rules-attribute-value" ng-dblclick="addLogicText([attribute.label, {name: column.column_name, label: column.attribute_label, type: column.type}])">
                                                    {{column.attribute_label}}
                                                    <span ng-drag="true" ng-drag-data="[attribute.label, {name: column.column_name, label: column.attribute_label, type: column.type}]"></span>
                                                </span>&nbsp;<span title="Integer attribute" ng-if="column.type == info.columnDataTypes['Integer'] || column.type == info.columnDataTypes['Long'] || column.type == info.columnDataTypes['Float'] || column.type == info.columnDataTypes['Double']" class="gb-rules-int-type">int</span>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="gb-rules-save-form container-fluid">                    
                    <form class="form-horizontal">
                        <!-- Inline context help directive -->                        
                        <div class="form-group margin-btm-5 col-lg-6 col-md-12 col-sm-12 col-xs-12" ng-init="showContent['label'] = false;"ng-mouseleave="showContent['label'] = false;">
                            <label for="inputLabel" class="col-lg-4 col-md-4 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100" title="{{info.tooltips['label']}}">Label<span class="color-red">*</span></label>
                            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12" id="gbTourAddRulesLabel">
                                <textarea class="form-control" ng-model="info.label" id="inputLabel" placeholder="Label" onkeydown="return (event.keyCode!=13);" maxlength="2048" ng-drop="true" ng-drop-success="onDropLabel($data, $event)" ng-focus="focusElement('label'); " ng-change="setUnsavedMode()"></textarea>
                            </div>
                        </div>
                        <div class="form-group margin-btm-5 col-lg-6 col-md-12 col-sm-12 col-xs-12" ng-init="showContent['description'] = false;"ng-mouseleave="showContent['description'] = false;">
                            <label for="inputDescription" class="col-lg-4 col-md-4 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100" title="{{info.tooltips['description']}}">Description</label>
                            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12" id="gbTourAddRulesDesc">
                                <textarea class="form-control" ng-model="info.description" id="inputDescription" placeholder="Description" maxlength="2048" onkeydown="return (event.keyCode!=13);" ng-focus="focusElement('other')" ng-change="setUnsavedMode()"></textarea>
                            </div>
                        </div>
                        <div class="form-group margin-btm-5 col-lg-6 col-md-12 col-sm-12 col-xs-12">
                            <label for="inputAuthor" class="col-lg-4 col-md-4 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100" title="{{info.tooltips['author']}}">Author<span class="color-red">*</span></label>
                            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12" id="gbTourAddRulesAuthor">
                                <input type="text" class="form-control" id="inputAuthor" ng-model="info.author" maxlength="64" placeholder="Author" ng-focus="focusElement('other')" ng-change="setUnsavedMode()">
                            </div>
                        </div>
                        <div class="form-group margin-btm-5 col-lg-6 col-md-12 col-sm-12 col-xs-12">
                            <label for="inputKBLink" class="col-lg-4 col-md-4 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100" title="{{info.tooltips['kb_link']}}">KB Link</label>
                            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12" id="gbTourAddRulesKBLink">
                                <input type="text" ng-model="info.kbLink" class="form-control" id="inputKBLink" maxlength="2048" placeholder="KB Link" ng-focus="focusElement('other')" ng-change="setUnsavedMode()">
                            </div>
                        </div>
                        <div class="form-group margin-btm-5 col-lg-6 col-md-12 col-sm-12 col-xs-12">
                            <label for="inputCategory" class="col-lg-4 col-md-4 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100" title="{{info.tooltips['category']}}">{{rulesconstants['CATEGORY']}}<span class="color-red">*</span></label>
                            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12 gb-add-edit-rule-manage-field" id="gbTourAddRulesCategory">
                                <select name="inputCategory" ng-model="info.category" id="inputCategory" class="form-control font-size-12 padding-left-3" ng-focus="focusElement('other')" ng-change="setUnsavedMode()">
                                    <option ng-if="info.category == 'select'" value="select" ng-selected="info.category == 'select'">Select</option>
                                    <option ng-repeat="category in info.categories track by $index" value="{{category.category_id}}" ng-selected="info.category == category.category_id">{{category.category}}</option>
                                </select>
                                <a class="gb-add-rule-manage-field-icon" ng-click="goToAddCategory()" title="Manage Category"><i class="fa fa-cog"></i></a>
                            </div>
                        </div>
                        <div class="form-group margin-btm-5 col-lg-6 col-md-12 col-sm-12 col-xs-12">
                            <label for="inputSeverity" class="col-lg-4 col-md-4 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100" title="{{info.tooltips['severity']}}">{{rulesconstants['SEVERITY']}}<span class="color-red">*</span></label>
                            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12" id="gbTourAddRulesSeverity">
                                <select name="inputSeverity" id="inputSeverity" ng-model="info.severity" class="form-control font-size-12 padding-left-3" ng-focus="focusElement('other')" ng-change="setUnsavedMode()">
                                    <option ng-if="info.severity == 'select'" value="select" ng-selected="info.severity == 'select'">Select</option>
                                    <option ng-repeat="severity in info.severities track by $index"  value="{{severity.severity_id}}" ng-selected="info.severity == severity.severity_id">{{severity.severity}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group margin-btm-5 col-lg-6 col-md-12 col-sm-12 col-xs-12">
                            <label for="inputPriority" class="col-lg-4 col-md-4 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100" title="{{info.tooltips['priority']}}">Priority<span class="color-red">*</span></label>
                            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12" id="gbTourAddRulesPriority">
                                <select name="inputPriority" id="inputPriority" ng-model="info.priority" class="form-control font-size-12 padding-left-3" ng-focus="focusElement('other')" ng-change="setUnsavedMode()">
                                    <option ng-if="info.priority == 'select'" value="select" ng-selected="info.priority == 'select'">Select</option>
                                    <option ng-repeat="priority in info.priorities track by $index"  value="{{priority.priority_id}}" ng-selected="info.priority == priority.priority_id">{{priority.priority}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group margin-btm-5 col-lg-6 col-md-12 col-sm-12 col-xs-12" ng-if="info.ruleType == 'supported'">
                            <label for="inputScope" class="col-lg-4 col-md-4 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100" title="{{info.tooltips['scope']}}">Scope<span class="color-red">*</span></label>
                            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12" id="gbTourAddRulesScope">
                                <select name="inputScope" id="inputScope" ng-model="info.scope" class="form-control font-size-12 padding-left-3" ng-focus="focusElement('other')" ng-change="setUnsavedMode()">
                                    <option ng-if="info.scope == 'select'" value="select" ng-selected="info.scope == 'select'">Select</option>
                                    <option ng-repeat="scope in info.scopes track by $index" value="{{scope}}" ng-selected="info.scope == scope">{{scope=='Table'?'Row':scope}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group margin-btm-5 col-lg-6 col-md-12 col-sm-12 col-xs-12">
                            <label for="inputMaxLimit" class="col-lg-4 col-md-4 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100" title="{{info.tooltips['max_limit']}}">{{rulesconstants['MAX_ALERTS_EMAIL']}}<span class="color-red">*</span></label>
                            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12" id="gbTourAddRulesMaxLimit">
                                <select name="rnainputMaxLimit" ng-model="info.maxLimit" id="inputMaxLimit" class="form-control font-size-12 padding-left-3" ng-focus="focusElement('other')" ng-change="setUnsavedMode()">
                                    <option ng-repeat="limit in info.maxLimits track by $index" value="{{limit}}" ng-selected="info.maxLimit == limit">{{limit}}</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12 gb-add-rule-max-limit-display">
                            <div class="form-group col-sm-12">
                                <label for="inputMaxLimitDisplay" class="col-lg-4 col-md-4 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100" title="{{info.tooltips['max_alerts_display_ui']}}">{{rulesconstants['MAX_ALERT_VIEW']}}<span class="color-red">*</span></label>
                                <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12 gb-slidecontainer" id="gbTourAddRulesMaxLimitDisplay">
                                    <input type="range" min="1" max="100"  class="slider" id="inputMaxLimitDisplay" ng-model="info.maxLimitDisplay" ng-focus="focusElement('other')" ng-change="setUnsavedMode()" >
                                    <span class="gb-slidecontainer-value">{{info.maxLimitDisplay}}</span>
                                </div>
                            </div>
                        </div>

                        <div class="form-group margin-btm-5 " ng-class="{'gb-add-rule-action-div col-lg-12 col-md-12 col-sm-12 col-xs-12 ':  info.action == 'mail', ' col-sm-12 col-xs-12 col-lg-6 col-md-12':  info.action != 'mail', 'gb-add-rule-action-div-uns': info.action == 'mail' && info.unsupportedrule  }">
                            
                            <div class="form-group margin-btm-5  " ng-class="{' col-lg-6 col-md-12 col-sm-12 col-xs-12':  info.action == 'mail', 'col-lg-12 col-md-12 col-sm-12 col-xs-12':  info.action != 'mail' }">
                                <label for="inputAction" class="col-lg-4 col-md-4 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100" title="{{info.tooltips['action']}}">Action<span class="color-red">*</span></label>
                                <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12" id="gbTourAddRulesAction">
                                    <select name="inputAction" ng-model="info.action" id="inputAction" class="form-control font-size-12 padding-left-3" ng-focus="focusElement('other')" ng-change="actionChange()">
                                        <option value="none">Persist</option>
                                        <option value="mail">{{rulesconstants['PERSIST_EMAIL']}}</option>
                                        <option ng-show="showAlertApiFeature" value="api">{{rulesconstants['PERSIST_CALL_API']}}</option>
                                    </select>
                                </div>
                            </div>
                            
                           
                            <div class="form-group margin-btm-5 col-lg-6 col-md-12 col-sm-12 col-xs-12"> 
                                <label for="inputEmailTemplate" class="col-lg-4 col-md-4 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100" title="{{info.tooltips['template']}}" ng-show="info.action == 'mail'">{{rulesconstants['EMAIL_TEMPLATE']}}<span class="color-red" >*</span></label>
                            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12 gb-add-edit-rule-manage-field" id="gbTourAddRulesEmailTemplate" ng-show="info.action == 'mail'">
                                <select name="inputEmailTemplate" ng-model="info.emailTemplate" id="inputEmailTemplate" class="form-control font-size-12 padding-left-3" ng-focus="focusElement('other')" ng-change="setUnsavedMode();">
                                    <option ng-if="info.emailTemplate == 'select'" value="select" ng-selected="info.emailTemplate == 'select'">Select</option>
                                    <option ng-repeat="template in info.templates track by $index" value="{{template.template_id}}" ng-selected="info.emailTemplate == template.template_id">{{template.template_name}}</option>
                                </select>
                                <a class="gb-add-rule-manage-field-icon" ng-click="goToManageTemplates()" title="Manage Templates"><i class="fa fa-cog"></i></a>
                            </div>
                            </div>
                            
                            
                            
                            
                            
                            
                            
                            
                            

                            <label for="autoSubscription" class="col-lg-2 col-md-4 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100 gb-autosub-label"  title="Auto subscription" ng-show="info.action == 'mail'">Auto Subscription</label>
                            <div class="col-lg-4 col-md-8 col-sm-12 col-xs-12 gb-auto-sub-div pt8" id="gbTourAddRulesAutoSubscription" ng-show="info.action == 'mail'">
                                <span class="gb-switch filter-btn" ng-click="info.subscription_enabled = !info.subscription_enabled;setUnsavedMode();checktagselectedstatus() " ng-class="{'active':  info['subscription_enabled'] }">
                                    <div class="gb-switch-handle"></div>
                                </span>
                                <span class="icon fa fa fa-info-circle gb-autosubscription-info-icon"  >
                                    <div id="gb-autosubscription-info-div" class="gb-autosubscription-info-div gb-custom_scroll-bar">
                                        Auto-Subscription is disabled by default.  By enabling Auto-Subscription, you allow users to subscribe to this rule.  The subscribed users then receive e-mail notifications when the rule generates alerts.
                                    </div>
                                </span>
                                
                            </div>
                            
                            <label for="subscriptionList" class="col-lg-2 col-md-4 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100"  ng-show="info.action == 'mail'"></label>
                            <div class="margin-btm-5 col-lg-4 col-md-8 col-sm-12 col-xs-12 " id="gbTourAddRulesSubscriptionList" ng-show="info.action == 'mail'">
                                <!-- <button type="button" class="gb-primary-btn gb-modal-btn-sm gb-autosub-add-btn" ng-click="openAddSubscribers()">Manage Subscribers</button> -->
                                <div id ="gb-add-rule-manage-subscribers-btn" class="gb-add-rule-manage-subscriber-btn" ng-click="openAddSubscribers()">Manage Subscribers <span class="icon fa fa fa-external-link gb-autosubscription-info-icon"  ></span></div>
                            </div>
                            

                            <div class="form-group margin-btm-5 col-lg-6 col-md-12 col-sm-12 col-xs-12" ng-if="info.clinsightFlag" > 
                                <label for="inputTag" class="col-lg-4 col-md-4 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100" title="{{info.tooltips['template']}}" ng-show="info.action == 'mail'">Tag<span class="color-red" >*</span></label>
                            <div  ng-class= "{'disabled': !info.subscription_enabled}" class="col-lg-8 col-md-8 col-sm-12 col-xs-12 gb-add-edit-rule-manage-field" id="gbTourAddRulesTagList" ng-show="info.action == 'mail'">
                                <button class="form-control gb-select-tag-btn" id="sysid-search-dropdown-icon" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Select Tag <span class="gb-selected-tag-count" ng-show="info.selectedTagsCount>0"> ({{info.selectedTagsCount}} Selected)</span> <span class="gb-add-rule-select-name-icon">
                                    <i class="fa fa-angle-down" aria-hidden="true"></i>
                                  </span></button>
                                <ul class="gb-add-rule-tag-dropdown dropdown-menu gb-custom_scroll-bar" style="font-size: 10px; " id="tag-dropdown-body" ng-click="$event.stopPropagation()">
                                    <div class="sysid-empty-block" ng-if="info.tagList.length == 0" id="tags-empty-block">No Tag(s) available</div>
                                  <!-- <li class="roleAction gb-add-rule-select-li"><a class="roleSelectAll" href="#" ng-click="dashCtrl.selectAllRole(); $event.stopPropagation()">Select All</a><a class="roleClear" href="#" ng-click="dashCtrl.clearAllRole(); $event.stopPropagation()">Clear</a></li> -->
                                  <li class="roleList gb-add-rule-select-li" ng-repeat="header in  info.tagList track by $index" ng-class="{'gb-rule-selected-tr': header.selected}" id="tag-list-li-{{$index+1}}"
                                    title="{{header.colName}}">
                                    <input type="checkbox" class=" gb-custom-checkbox glyphicon" style="margin: 0px !important;" ng-checked="header.selected" ng-model="header.selected" id="tag-list-item-checkbox-{{$index+1}}" ng-change="updateTagSelectedCount()">
                                    <span id="tag-list-item-{{$index+1}}" class="roleName gb-add-rule-select-li-span" ng-click="header.selected = !header.selected; updateTagSelectedCount()" >{{header.tag_name}}</span>
                                  </li>
                                  <!-- <button class="assignRoleBtn"  ng-click="dashCtrl.addRoleConf()" id="gbTourDasboardAssignRoleBtn">DONE</button> -->
                                </ul>
                                <!-- <a class="gb-add-rule-manage-field-icon" ng-click="goToManageTemplates()" title="Manage Templates"><i class="fa fa-cog"></i></a> -->
                                
                            </div> 
                            <span class="icon fa fa fa-info-circle gb-autosubscription-info-icon" ng-show="info.action == 'mail'" >
                                <div id="gb-tag-info-div" class="gb-autosubscription-info-div gb-custom_scroll-bar">
                                    Tagging a Rule is enabled only if Auto-Subscription is enabled. <br /> 
                                    Tags are used to "tag" or associate one or more rules of a similar category or type. A rule can be part of multiple tags.<br /> 
                                    When Clinsights app users or custom Healthcheck app users subscribe to a specific tag, they inturn subscribe to all the rules associated with that tag.
                                </div>
                            </span>

                            </div>

                        </div>
			         
                        <!-- <div class="form-group margin-btm-5 col-lg-6 col-md-12 col-sm-12 col-xs-12" ng-show="info.action == 'mail'">
                            <label for="inputEmailTemplate" class="col-lg-4 col-md-4 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100" title="{{info.tooltips['template']}}">{{rulesconstants['EMAIL_TEMPLATE']}}<span class="color-red">*</span></label>
                            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12 gb-add-edit-rule-manage-field" id="gbTourAddRulesEmailTemplate" ng-show="info.action == 'mail'">
                                <select name="inputEmailTemplate" ng-model="info.emailTemplate" id="inputEmailTemplate" class="form-control font-size-12 padding-left-3" ng-focus="focusElement('other')" ng-change="setUnsavedMode();">
                                    <option ng-if="info.emailTemplate == 'select'" value="select" ng-selected="info.emailTemplate == 'select'">Select</option>
                                    <option ng-repeat="template in info.templates track by $index" value="{{template.template_id}}" ng-selected="info.emailTemplate == template.template_id">{{template.template_name}}</option>
                                </select>
                                <a class="gb-add-rule-manage-field-icon" ng-click="goToManageTemplates()" title="Manage Templates"><i class="fa fa-cog"></i></a>
                            </div>
                            <label for="inputLabel" class="col-lg-4 col-md-4 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100" title="Subscription Email">Subscription Email<span class="color-red">*</span></label>
                            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12" id="gbTourAddRulesLabel">
                                <textarea class="form-control" ng-model="info.label" id="inputLabel" placeholder="Enter Email" onkeydown="return (event.keyCode!=13);" maxlength="2048" ng-drop="true" ng-drop-success="onDropLabel($data, $event)" ng-focus="focusElement('label'); " ng-change="setUnsavedMode()"></textarea>
                            </div>

                            <div class="form-group  col-lg-6 col-md-12 col-sm-12 col-xs-12" ng-show="info.action == 'mail'">
                                <label for="inputEmailTemplate" class="col-lg-4 col-md-4 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100" title="{{info.tooltips['template']}}">Auto Subscription</label>
                                <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12 gb-add-edit-rule-manage-field-icon" id="gbTourAddRulesEmailTemplate" ng-show="info.action == 'mail'">
                                       <span class="gb-switch filter-btn" ng-click="info.auto_subscription = !info.auto_subscription" ng-class="{'active':  info['auto_subscription'] }">
                                           <div class="gb-switch-handle"></div>
                                       </span>
                                </div>
                            </div>
                        </div> -->
                        <div class="form-group margin-btm-5 col-lg-6 col-md-12 col-sm-12 col-xs-12" ng-show="info.action == 'api'">
                            <label for="inputAPITemplate" class="col-lg-4 col-md-4 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100" title="{{info.tooltips['template']}}">{{rulesconstants['API_TEMPLATE']}}<span class="color-red">*</span></label>
                            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12 gb-add-edit-rule-manage-field" id="gbTourAddRulesAPITemplate"  ng-show="info.action == 'api'">
                                <select name="inputAPITemplate" ng-model="info.apiTemplate" id="inputAPITemplate" class="form-control font-size-12 padding-left-3" ng-focus="focusElement('other')" ng-change="setUnsavedMode();changeAPITemplateSelection()">
                                    <option ng-if="info.apiTemplate == 'select'" value="select" ng-selected="info.apiTemplate == 'select'">Select</option>
                                    <option ng-repeat="apiTemp in info.apiTemplates track by $index" value="{{apiTemp.apiTemplateId}}" ng-selected="info.apiTemplate == apiTemp.apiTemplateId" >{{apiTemp.apiTemplateName}}</option>
                                </select>
                                <a class="gb-add-rule-manage-field-icon" ng-click="goToManageAPITemplates();setUnsavedMode()" title="Manage API Templates"><i class="fa fa-cog"></i></a>
                            </div>
                        </div>

                       
                        <!-- <div class="form-group margin-btm-5 col-lg-6 col-md-12 col-sm-12 col-xs-12" ng-init="showContent['label'] = false;"ng-mouseleave="showContent['label'] = false;" ng-show="info.manual_subscription">
                            <label for="inputLabel" class="col-lg-4 col-md-4 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100" title="Subscription Email">Subscription Email<span class="color-red">*</span></label>
                            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12" id="gbTourAddRulesLabel">
                                <textarea class="form-control" ng-model="info.label" id="inputLabel" placeholder="Enter Email" onkeydown="return (event.keyCode!=13);" maxlength="2048" ng-drop="true" ng-drop-success="onDropLabel($data, $event)" ng-focus="focusElement('label'); " ng-change="setUnsavedMode()"></textarea>
                            </div>

                            <div class="form-group  col-lg-6 col-md-12 col-sm-12 col-xs-12" ng-show="info.action == 'mail'">
                                <label for="inputEmailTemplate" class="col-lg-4 col-md-4 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100" title="{{info.tooltips['template']}}">Auto Subscription</label>
                                <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12 gb-add-edit-rule-manage-field-icon" id="gbTourAddRulesEmailTemplate" ng-show="info.action == 'mail'">
                                       <span class="gb-switch filter-btn" ng-click="info.auto_subscription = !info.auto_subscription" ng-class="{'active':  info['auto_subscription'] }">
                                           <div class="gb-switch-handle"></div>
                                       </span>
                                </div>
                            </div>
                        </div> -->

                        

                        <div class="form-group margin-btm-5 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <label for="inputRecommendation" class="col-lg-2 col-md-12 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100 gb-text-align-left" title="{{info.tooltips['recommendation']}}">{{rulesconstants['RECOMMENDATION']}}</label>
                            <div class="col-lg-10 col-md-12 col-sm-12 col-xs-12 gb-rules-recommendation" id="gbTourAddRulesRecommendation">
                                <textarea class="form-control" ng-model="info.recommendation" id="inputRecommendation" ng-drop="true" ng-drop-success="onDropRecommendation($data, $event)"
                                ng-focus="focusElement('recommendation')" maxlength="2048" placeholder="Recommendation" ng-change="setUnsavedMode()"></textarea>
                            </div>
                        </div>
                        <div class="form-group margin-btm-5 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <label for="inputJustification" class="col-lg-2 col-md-12 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100 gb-text-align-left" title="{{info.tooltips['alert_justification']}}">{{rulesconstants['JUSTIFICATION']}}</label>
                            <div class="col-lg-10 col-md-12 col-sm-12 col-xs-12 gb-rules-alert_justification" id="gbTourAddRulesJustification">
                                <textarea class="form-control" ng-model="info.alert_justification" id="inputJustification" ng-drop="true" ng-drop-success="onDropJustification($data, $event)"
                                    ng-focus="focusElement('alert_justification')" maxlength="2048" placeholder="{{rulesconstants['JUSTIFICATION']}}" ng-change="setUnsavedMode()">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group margin-btm-5 col-lg-12 col-md-12 col-sm-12 col-xs-12" ng-if="info.ruleType == 'supported'">
                            <label for="inputLogic" class="col-lg-2 col-md-12 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100 gb-text-align-left" title="{{info.tooltips['logic']}}">Logic<span class="color-red">*</span></label>
                            <div class="col-lg-10 col-md-12 col-sm-12 col-xs-12" id="gbTourAddRulesLogic">
                                <textarea class="form-control" id="inputLogic" ng-model="info.logic" placeholder="Logic" onkeydown="return (event.keyCode!=13);"  ng-drop="true" ng-drop-success="onDropLogic($data, $event)" ng-focus="focusElement('logic')" maxlength="2048" ng-change="setUnsavedMode()"></textarea>
                                <input type="hidden" id="hiddenLogic" ng-model="info.hiddenLogic" />
                                <input type="hidden" id="convertedLogic" ng-model="info.convertedLogic" />
                            </div>
                        </div>
                        <div class="form-group margin-btm-5 col-md-12 col-lg-12 col-md-12 col-sm-12 col-xs-12" ng-if="info.ruleType == 'supported'">
                            <label for="inputText" class="col-lg-2 col-md-12 col-sm-12 col-xs-12 control-label font-size-10 font-weight-100 gb-text-align-left" title="{{info.tooltips['text']}}">Text<span class="color-red">*</span></label>
                            <div class="col-lg-10 col-md-12 col-sm-12 col-xs-12" id="gbTourAddRulesText">
                                <textarea class="form-control" id="inputText" ng-model="info.text" placeholder="Text" ng-drop="true" ng-drop-success="onDropText($data, $event)" ng-focus="focusElement('text')" maxlength="2048" ng-change="setUnsavedMode()"></textarea>
                                <input type="hidden" id="hiddenText" ng-model="info.hiddenText" />
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-2"></div>
                            <div class="col-sm-10">
                                <button type="button" id="gb-supported-ra-submit" class="gb-primary-btn" ng-click="submitRule('parent')">
                                    {{rulesconstants['SUBMIT']}}
                                </button>
                                <button type="button" id="gb-supported-ra-test" class="gb-primary-btn" ng-if="info.ruleAdded && info.ruleAddedAsDraft && (info.ruleType == 'supported')" ng-click="testRule()">
                                    {{rulesconstants['TEST_RULE']}}
                                </button>
                                <button type="button" id="gb-supported-ra-addnew" class="gb-primary-btn" ng-if="info.ruleAdded && (info.ruleType == 'supported')" ng-click="addNewRule()">
                                    {{rulesconstants['ADD_NEW']}}
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
                <div ng-if="info.ruleType == 'supported'" class="gb-rules-operators-functions">
                    <div class="gb-rules-functions" id="gbtour-rAa-operator-list">
                        <div class="gb-rules-functions-header font-size-12">
                            {{rulesconstants['OPERATOR']}}

                        </div>
                        <div class="gb-rules-functions-contents">
                            <span ng-repeat="operator in info.operators track by $index">
                                <span title="{{operator.tooltip}}" class="drag-object color-428bca font-wrseight-bold" ng-dblclick="addLogicText([null, operator])">
                                    {{operator.label}}
                                    <span ng-drag="true" ng-drag-data="[null, operator]"></span>
                                </span>&nbsp;
                            </span>
                        </div>
                    </div>
                    <div class="gb-rules-functions" id="gbtour-rAa-functions-list">
                        <div class="gb-rules-functions-header font-size-12">
                            {{rulesconstants['FUNCTION']}}
                        </div>
                        <div class="gb-rules-functions-contents">
                            <span ng-repeat="function in info.functions track by $index">
                                <span title="{{function.tooltip}}" class="drag-object color-428bca font-weight-bold" ng-dblclick="addLogicText([null, function])">
                                    {{function.label}}
                                    <span ng-drag="true" ng-drag-data="[null, function]"></span>
                                </span>&nbsp;
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div ng-drag-clone="" class="font-size-10">
    {{clonedData[1].label}}
</div>

