<div class="panel panel-gb-default analytics gb-save-section-view">
    <div class="panel-heading">
        <h3 class="panel-title">Save Config Diff View <span class="glyphicon glyphicon-remove pull-right gb-close-btn"
                                                            title="Press Esc to remove"
                                                            ng-click="saveConfigCtrl.hideModal()"></span></h3>

    </div>
    <div class="loading-small alert alert-info"
         ng-class="{'hidden': saveConfigCtrl.saveModal.saveStatus != 'progress'}">
        <span>Saving...</span>
    </div>
    <div ng-class="{'hidden': saveConfigCtrl.saveModal.saveStatus != 'success'}" class="alert alert-success">
        {{saveConfigCtrl.saveModal.message}}
    </div>
    <div ng-class="{'hidden': saveConfigCtrl.saveModal.saveStatus != 'error'}" class="alert alert-danger">
        {{saveConfigCtrl.saveModal.message}}
    </div>
    <div ng-class="{'hidden': saveConfigCtrl.saveModal.saveStatus != 'initiated'}">
        <div ng-class="{'hidden': saveConfigCtrl.getEmptySectionList().length <= 0}" class="alert alert-warning">
            You can not save these section as they have no data or no column selected:
            <ul>
                <li ng-repeat="sec in saveConfigCtrl.getEmptySectionList() track by $index">{{sec.label}}</li>
            </ul>
        </div>
    </div>

    <form class="form-horizontal" name="saveConfigCtrl.form.saveViewModal" novalidate>
        <div class="panel-body" ng-class="{'hidden': saveConfigCtrl.saveModal.saveStatus != 'initiated'}">
            <div class="form-group">
                <label for="viewName" class="col-sm-5 control-label">Name this View</label>

                <div class="col-sm-6">
                    <input type="text" maxlength="50" ng-minlength="3" class="form-control" name="viewName"
                           placeholder="View Name"
                           ng-model="saveConfigCtrl.saveModal.name" ng-pattern="/^[a-zA-Z0-9\s]*$/"
                           ng-change="saveConfigCtrl.checkViewName()"
                           required>
			<span class="has-error" sly-show="saveConfigCtrl.form.saveViewModal.viewName.$error.required">
				<span class="help-block" ng-bind="saveConfigCtrl.getValue('required_vname')"></span>
			</span>
			<span class="has-error" sly-show="saveConfigCtrl.form.saveViewModal.viewName.$error.minlength">
				<span class="help-block" ng-bind="saveConfigCtrl.getValue('invalid_minlength')"></span>
        	</span>
		<span class="has-error" sly-show="saveConfigCtrl.form.saveViewModal.viewName.$error.pattern">
				<span class="help-block" ng-bind="saveConfigCtrl.getValue('invalid_chars')"></span>
        	</span>
		<span class="has-error" ng-show="saveConfigCtrl.form.saveViewModal.viewName.$error.duplicate">
				<span class="help-block" ng-bind="saveConfigCtrl.getValue('duplicate_view')"></span>
        	</span>   	
		<span class="has-warning" ng-show="saveConfigCtrl.saveModal.viewOverwrite">
				<span class="help-block" ng-bind="saveConfigCtrl.getValue('overwrite_view')"></span>
        	</span>
                </div>
            </div>
            <div class="form-group">
                <label for="viewDescription" class="col-sm-5 control-label">Description</label>

                <div class="col-sm-6">
          <textarea class="form-control save-view-textarea" placeholder="Description"
                    class="saveViewTextArea" name="viewDesc" ng-model="saveConfigCtrl.saveModal.desc"
                    ng-maxlength="250"></textarea>
          
			<span class="has-error" sly-show="saveConfigCtrl.form.saveViewModal.viewDesc.$error.maxlength">
				<span class="help-block" ng-bind="saveConfigCtrl.getValue('invalid_maxlength_desc')"></span>
        	</span>
                </div>
            </div>
            <div class="form-group">
                <label for="viewSelectedSection" class="col-sm-5 control-label">Selected Sections</label>

                <div class="col-sm-6">
                    <select class="form-control" id="viewSelectedSection" placeholder="Selected Sections"
                            ng-model='saveConfigCtrl.info.selected'
                            ng-init='saveConfigCtrl.info.selected=saveConfigCtrl.selectedSections()[0]'
                            ng-options='option.label for option in saveConfigCtrl.selectedSections()'
                            ng-change="saveConfigCtrl.updateColumnAttributes(saveConfigCtrl.form.saveViewModal.type)"
                            >
                        <option value="?">Select</option>
                    </select>
                </div>
            </div>
            <div class="form-group" sly-show="saveConfigCtrl.info.selected.keys">
                <label for="viewSelectedAttribute" class="col-sm-5 control-label">Selected Attribute</label>

                <div class="col-sm-6">
                    <ul class="gb-save-view-attributelist" id="viewSelectedAttribute">
                        <li ng-repeat="attr in saveConfigCtrl.info.selected.keys | filter : {visible : true} track by $index">
                            {{attr.col_name}}
                        </li>
                    </ul>
                </div>
            </div>
            <div class="form-group" sly-show="!saveConfigCtrl.info.selected.keys">
                <label class="col-sm-5 control-label">Selected Attribute</label>

                <div class="col-sm-6">
                    <label>No attribute found.</label>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-5 control-label">Number of Observations </label>

                <div class="col-sm-6">
                    Last {{saveConfigCtrl.info.selected.count}}
                </div>
            </div>
            <div class="form-group" ng-init="saveConfigCtrl.saveModal.access=private">
                <label for="viewAccess" class="col-sm-5 control-label">Access</label>

                <div class="col-sm-6">
                    <label class="radio-inline">
                        <input type="radio" id="inlineCheckbox1" name="access"
                               ng-checked="saveConfigCtrl.saveModal.access==private"
                               ng-model="saveConfigCtrl.saveModal.access" value="private">
                        Private </label>
                    <label class="radio-inline">
                        <input type="radio" id="inlineCheckbox2" name="access"
                               ng-model="saveConfigCtrl.saveModal.access"
                               value="public">
                        Public </label>
                </div>
            </div>
            <div class="form-group">
                <label for="url" class="col-sm-5 control-label">Attach knowledge base document</label>

                <div class="col-sm-6">
                    <input type="url" class="form-control" name="kbase" placeholder="Enter URL"
                           ng-init="saveConfigCtrl.saveModal.kbase=''"
                           ng-model="saveConfigCtrl.saveModal.kbase"
                           ng-focus="saveConfigCtrl.kbaseOnFocus()"
                           ng-blur="saveConfigCtrl.kbaseOnBlur()"
                           value="{{saveConfigCtrl.saveModal.kbase}}">
                   
          <span class="has-error"
                sly-show="saveConfigCtrl.submitted && saveConfigCtrl.form.saveViewModal.kbase.$error.url">
  					<span class="help-block">Please enter valid URL (<i>http://www.google.com</i>)</span>
					</span>

                </div>

            </div>
            <div class="panel-footer" ng-class="{'hidden': saveConfigCtrl.saveModal.saveStatus != 'initiated'}">
                <button type="button" class="gb-primary-btn gb-modal-btn-sm pull-left"
                        data-ng-click="saveConfigCtrl.submitted=true; saveConfigCtrl.saveFilter()">
                    Save View
                </button>
                <button type="button" class="gb-secondary-btn gb-modal-btn-sm pull-left" title="Press Esc to remove"
                        data-dismiss="modal" ng-click="saveConfigCtrl.hideModal()">
                    Cancel
                </button>
            </div>
        </div>
    </form>
</div>   
                  