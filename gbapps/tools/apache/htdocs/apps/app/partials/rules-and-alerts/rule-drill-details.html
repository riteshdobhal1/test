<div class="panel panel-gb-primary gb-rule-drill-details-modal">
    <div class="panel-heading ">
        <h3 class="panel-title">Rule Details- <span class="gb-panel-header-rule-label-span">({{current_label_display}})</span></h3>
        <i class="fa fa-times gb-close-btn gb-panel-close-btn-fix" aria-hidden="true" title="Press Esc to remove" ng-click="modal.close()"></i>
    </div> 
    <div class="panel-body grid gb-rule-drill-details-main-container">
        <table class="table table-bordered gb-rule-drill-details-main-table">
            <thead>
                <tr>
                    <th class="gb-expand-cell">
                        <a href="#" class="gb-rule-history-toggleRow" ng-click="ruleHistoryExpandToggle()" title="{{!info.ruleHistoryTableExpandAll?'Expand All': 'Collapse All'}}">
                            <i class="fa fa-chevron-up gb-row-expand-icon" ng-class="{'gb-icon-rotate-180-deg':!info.ruleHistoryTableExpandAll}"></i>                                      
                        </a>
                    </th>
                    <th style="min-width: 60px">{{rulesconstants['VERSION']}}</th>
                    <th style="min-width: 150px">{{rulesconstants['DATE_OF_CHANGE']}}</th>
                    <th style="min-width: 150px">{{rulesconstants['CHANGED_BY']}}</th>
                    <th style="min-width: 120px">{{rulesconstants['TYPE_OF_CHANGE']}}</th>
                    <th style="min-width: 150px">{{rulesconstants['NO_OF_CHANGES']}}</th>
                    <th style="width: 25%">{{rulesconstants['COMMENTS']}}</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat-start="i in changeDetails track by $index" ng-class="{'gb-row-expand':i.showDetails}" id="rulehistory{{$index+1}}">
                    <td title="View Details" class="gb-expand-cell" id="icon">
                        <span ng-if="i.number_of_changes">
                            <a href="#" ng-click="drillViewDetails(i)" title="Details">
                                <i class="fa fa-chevron-up gb-row-expand-icon" ng-class="{'gb-icon-rotate-180-deg':!i.showDetails}"></i>
                            </a>
                        </span>
                        <span ng-if="!i.number_of_changes">-</span>
                    </td>
                    <td title="{{$index+1}}" id="version">
                        {{i.version}}
                    </td>
                    <td class="uploadLogvaultStatusDiv" title="{{i.modified_ts}}" id="modified_ts">
                        <span>{{i.modified_ts}}</span>
                    </td>
                    <td class="uploadLogvaultStatusDiv" title="{{i.modified_by}}" id="modified_by">
                        <span>{{i.modified_by}}</span>
                    </td>
                    <td class="uploadLogvaultStatusDiv" title="{{i.type_of_change}}" id="type_of_change">
                        <span >{{i.type_of_change}}</span>
                    </td>
                    <td class="uploadLogvaultStatusDiv" title="{{i.number_of_changes}}" id="number_of_changes">
                        <span>{{i.number_of_changes}}</span>
                    </td>
                    <td class="uploadLogvaultStatusDiv" title="{{i.comments}}" id="comments" > 
                        <span>{{i.comments}}</span>
                    </td>
                </tr>
                <tr ng-repeat-end ng-show="i.showDetails" class="gb-rule-history-view-details-tr" >
                    <td colspan="7">
                        <div class="gb-rule-history-view-details-div" ng-class="{'gb-row-expand-animation':i.showDetails}">
                            <table class="table table-bordered gb-rule-drill-details-main-table gb-rule-drill-details-sub-table">
                                <thead>
                                    <tr>
                                        <th>{{rulesconstants['SL_NO']}}</th>
                                        <th>{{rulesconstants['ATTR_CHANGED']}}</th>
                                        <th>From</th>
                                        <th>To</th>
                                    </tr>
                                </thead>
                                <tbody ng-repeat="details in i.changes_map track by $index">
                                    <tr ng-repeat="(key, value) in details track by $index" id="rulehistory{{$parent.$parent.$index+1}}_details{{$parent.$index+1}}">
                                        <td class="uploadLogvaultStatusDiv" title="{{$parent.$index+1}}" id="slno">
                                            <span>{{$parent.$index+1}}</span>
                                        </td>
                                        <td class="uploadLogvaultStatusDiv" title="{{key}}" id="attribute_that_changed">
                                            <span>{{key}}</span>
                                        </td>
                                        <td class="uploadLogvaultStatusDiv" title="{{value.From}}" id="from">
                                            <span>{{value.From}}</span>
                                        </td>
                                        <td class="uploadLogvaultStatusDiv" title="{{value.To}}" id="to">
                                            <span>{{value.To}}</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>