<div ng-controller="WorkbenchCtrl" class="min-height-600" ng-class="{'margin-btm-60': isInstanceViewerVisible()}"><div ng-if="datasourcesShown" id="gb-workbench-datasource-cntr"><div class="gb-page-title-bar"></div><div class="workbench-container" ng-show="!!datasources"><div class="workbench-container-grid-cntr"><div class="gb-table-top-tool-bar"><div class="addDataSourceBtn" ng-if="createDataSourcePermission"><button class="btn gb-primary-btn gb-modal-btn-sm" ng-click="createNewDatasource()" title="Add Datasource"><i class="fa fa-database" aria-hidden="true"></i> +</button></div><div class="removeDataSourceBtn" ng-if="createDataSourcePermission" ng-show="datasources.length"><button class="btn gb-primary-btn gb-modal-btn-sm" ng-disabled="!showAddTagsDd()" ng-click="removeDatasourceConf()" title="Remove Datasource"><i class="fa fa-database" aria-hidden="true"></i> -</button></div><div id="gb-workbench-add-tag-dd-container" ng-show="datasources.length"><button class="btn gb-primary-btn gb-modal-btn-sm" ng-disabled="!showAddTagsDd()" ng-class="{'disabled':!showAddTagsDd()}" data-toggle="dropdown" title="Add tags to the selected datasources" ng-click="info.errMsg='';info.tags=''" aria-expanded="false" id="workAddTag"><i class="fa fa-tags" aria-hidden="true"></i></button><div class="dropdown-menu dropdown-menu-form gb-add-tags-dd" role="menu" ng-click="$event.stopPropagation();"><div class="panel-heading"><span class="title">Add Tags</span><div class="gb-error-text-smallest alert alert-danger ng-binding ng-hide" ng-show="showMsg()">{{info.errMsg}}</div></div><div class="panel-body"><textarea row="3" placeholder="Enter tag name" ng-model="info.tags" ng-change="isAlphaNumeric()" class="ng-valid ng-dirty ng-touched"></textarea><div class="gb-help-text-smallest">Add multiple tags separated by comma "," or space.<br>For example: tag1,tag2 OR tag1 tag2</div><div class="gb-all-tags-list" ng-show="getAllTagsName().length > 0"><a ng-repeat="tag in getAllTagsName()  track by $index" class="gb-all-tags-text" ng-click="addExistingTag(tag)" title="Add Tag">{{tag}}</a></div><footer><button id="workAddTagSubmit" class="gb-primary-btn gb-primary-sm-btn" ng-class="{'gb-primary-btn-disabled':info.errMsg || !info.tags}" ng-click="addTagsMultiple()" ng-disabled="info.errMsg || !info.tags" disabled="disabled">Submit</button></footer></div></div></div><div class="gb-search-box-with-icon-as-bg" id="gbtour-workbench-search-datasource-tag" ng-show="datasources.length"><span class="glyphicon glyphicon-search form-control-feedback"></span> <input class="gb-inline-search-box ng-pristine" type="text" ng-model="info.key" placeholder="Search datasource/tag"></div></div><div class="gb-flat-table"><div ng-hide="datasources.length" align="center" class="gb-msg-center"><span class="msg" ng-bind-html="renderHtml(getValue('no_datasources'))"></span></div><table class="table table-condensed" ng-show="sources.length" ng-show="datasources.length"><thead><tr><th class="gb-table-th gb-row-filter gb-select-all-box" id="gbtour-workbench-selectall-datasources"><input type="checkbox" class="gb-custom-checkbox glyphicon checkall" ng-model="info.selectAll" ng-click="toggleSelectAll('all')"></th><th class="sortable gb-table-th gb-row-filter padding-left-25" ng-click="toggleSort()"><div class="gb-sortable-data gb-sortable" ng-class="info.reverse?'gb-sort-desc':'gb-sort-asc'" id="gbtour-workbench-sources-column-header">Datasources</div></th><th class="sortable gb-table-th gb-row-filter padding-left-25" id="gbtour-workbench-tags-column-header">Tags</th></tr></thead><tbody><tr ng-repeat="source in refresh() track by $index"><td class="icon-head gb-link"><input type="checkbox" class="gb-custom-checkbox glyphicon" ng-model="source.selected" ng-click="toggleSelectAll(source)"></td><td ng-attr-title="{{source['_name']}}" class="padding-left-25"><span ng-click="goToEditMode(source['_name'])" class="cursor-pointer color-blue">{{source['_name']}}</span></td><td class="gb-flat-table-tags-cell"><span ng-attr-title="{{tag}}" class="gb-grid-cell-tags" ng-repeat="tag in getAllTagsName(source._id)  track by $index"><span>{{tag}}</span> <span>&nbsp;</span> <span title="Remove tag" ng-click="removeTagFromWorkbook(source, tag)" class="remove-tag icon-close"></span> </span><span>&nbsp;</span></td></tr></tbody></table></div><div ng-show="sources.length"><div class="gb-flat-table-footer"><div class="page-count-list font-size-10">Show<div class="form-inline page-count-form" id="gbtour-workbench-pagesize"><select class="input-xs page-count-box margin-left-0" ng-model="info.page.count" ng-change="changePageSize()"><option value="10">10</option><option value="20" ng-disabled="info.page['total'] <= 10">20</option><option value="30" ng-disabled="info.page['total'] <= 20">30</option><option value="40" ng-disabled="info.page['total'] <= 30">40</option><option value="50" ng-disabled="info.page['total'] <= 40">50</option><option value="100" ng-disabled="info.page['total'] <= 50">100</option></select></div></div><div class="gb-pagination display-inline-block gb-rules-pagination margin-left-13" id="gbtour-workbench-pagination"><a class="icon-previous2 pagination-icon" title="First Page" ng-click="firstPage()" ng-class="{'pagination-icon-disabled': (info.page['current'] <= 0)}"></a> <a class="icon-arrow-left7 pagination-icon" title="Previous Page" ng-click="prevPage()" ng-class="{'pagination-icon-disabled': (info.page['current'] <= 0)}"></a><pre class="gb-pagination-msg" ng-show="info.page['current'] < info.page['pages'] - 1">{{info.page['current'] * info.page['count'] + 1}} - {{info.page['current'] * info.page['count'] + info.page['count']}} of {{info.page['total']}}</pre><pre class="gb-pagination-msg" ng-show="info.page['current'] == info.page['pages'] - 1">{{info.page['current'] * info.page['count'] + 1}} - {{info.page['total']}} of {{info.page['total']}}</pre><a class="icon-arrow-right7 pagination-icon" title="Next Page" ng-click="nextPage()" ng-class="{'pagination-icon-disabled': (info.page['current'] >= (info.page['pages'] - 1))}"></a> <a class="icon-next2 pagination-icon" title="Last Page" ng-click="lastPage()" ng-class="{'pagination-icon-disabled': (info.page['current'] >= (info.page['pages'] - 1))}"></a></div></div></div><div align="center" class="gb-msg-center" ng-hide="sources.length || !datasources.length"><span class="msg">No matching datasources.</span></div></div></div><div class="page-loader-white-gb" ng-hide="(!!datasources || info.requestFailed || info.unAuthorizedUser || info.tableauServerDown) && !info.pageLoading"><div class="page-loader-body"><div class="rect rect1"></div><div class="rect rect2"></div><div class="rect rect3"></div><div class="rect rect4"></div><div class="rect rect5"></div></div></div><div align="center" class="gb-msg-center" ng-show="info.requestFailed"><span class="msg" ng-bind-html="sceHTML(getValue('workbench_reload_msg'))"></span></div><div align="center" class="gb-msg-center" ng-show="info.unAuthorizedUser"><span class="msg" ng-bind-html="sceHTML(getValue('unauthorized_user'))"></span></div><div align="center" class="gb-msg-center" ng-show="info.tableauServerDown"><span class="msg" ng-bind-html="sceHTML(getValue('tab_server_down'))"></span></div></div><div ng-if="!datasourcesShown"><span class="gb-link-normal gb-tableau-link" ng-click="showDatasources()">{{backLink}}</span><div id="tabContainer" class="tableau-container" ng-hide="datasourcesShown"></div></div></div>