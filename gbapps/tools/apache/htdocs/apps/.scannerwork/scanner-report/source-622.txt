<div class="container-fluid padding-0 gb-add-rule" ng-controller="AddRuleCtrl" style="background-color: #fff"><div class="loading height-450" sly-show="info.categoriesLoading"></div><div class="row-fluid" ng-hide="info.categoriesLoading"><div class="col-sm-12"><label class="font-size-12">{{info.pageLabel}}</label></div></div><div class="row-fluid" ng-hide="info.categoriesLoading"><div class="col-sm-12"><div class="gb-rules-container width-100-per"><div class="gb-rules-tree-view width-244 pull-left"><div class="gb-rules-tree-heading"><span>Attribute List</span></div><div class="gb-rules-tree-content"><div ng-show="info.sectionsLoading" class="text-align-center font-size-10">Please wait. Loading...</div><div ng-show="info.sectionsLoading" class="loading-small height-18 padding-top-0"></div><div ng-hide="info.sectionsLoading"><div class="gb-rules-tree-structure font-size-10"><ul><li ng-repeat="attribute in info.attributes track by $index"><span class="gb-rules-expand-icon cursor-pointer" ng-class="{'icon-minus': !!attribute.expanded, 'icon-plus': !attribute.expanded}" ng-click="attribute.expanded = !attribute.expanded; expandSection(attribute)"></span> <span class="font-weight-bold cursor-pointer gb-rules-attribute-title">{{attribute.label}}</span><div ng-if="!attribute.hasData && !!attribute.expanded" class="loading-small height-18 padding-top-0"></div><ul class="gb-rules-tree-child" sly-show="!!attribute.expanded"><li ng-repeat="column in attribute.columns track by $index" ng-if="column.attribute_label != null && column.attribute_label != ''"><span class="drag-object gb-rules-attribute-value" ng-dblclick="addLogicText([attribute.label, {name: column.column_name, label: column.attribute_label, type: column.type}])">{{column.attribute_label}} <span ng-drag="true" ng-drag-data="[attribute.label, {name: column.column_name, label: column.attribute_label, type: column.type}]"></span> </span>&nbsp;<span title="Integer attribute" ng-if="(column.type + column.size) == info.columnDataTypes['Integer'] || (column.type + column.size) == info.columnDataTypes['Long'] || (column.type + column.size) == info.columnDataTypes['Float'] || (column.type + column.size) == info.columnDataTypes['Double']" class="gb-rules-int-type">int</span></li></ul></li></ul></div></div></div></div><div class="gb-rules-save-form padding-left-right-15"><div class="gb-rules-msg-block" ng-if="!!info.addRuleMsg['type']" gb-outside-click="clearMessage()"><div class="alert padding-0 text-align-center margin-btm-0" ng-class="{'alert-success': info.addRuleMsg['type'] == 'success', 'alert-danger': info.addRuleMsg['type'] == 'failure'}" ng-bind-html="renderHtml(info.addRuleMsg['msg'])"></div></div><form class="form-horizontal"><div class="form-group margin-btm-5"><label for="inputLabel" class="col-sm-2 control-label font-size-10 font-weight-100">Label<span class="color-red">*</span></label><div class="col-sm-10"><textarea class="form-control" ng-model="info.label" id="inputLabel" placeholder="Label" ng-focus="focusElement('other')" ng-change="setUnsavedMode()"></textarea></div></div><div class="form-group margin-btm-5"><label for="inputDescription" class="col-sm-2 control-label font-size-10 font-weight-100">Description</label><div class="col-sm-10"><textarea class="form-control" ng-model="info.description" id="inputDescription" placeholder="Description" ng-focus="focusElement('other')" ng-change="setUnsavedMode()"></textarea></div></div><div class="form-group margin-btm-5"><label for="inputCategory" class="col-sm-2 control-label font-size-10 font-weight-100">Category<span class="color-red">*</span></label><div class="col-sm-10"><select name="inputCategory" ng-model="info.category" id="inputCategory" class="form-control font-size-12 padding-left-3" ng-focus="focusElement('other')" ng-change="setUnsavedMode()"><option ng-if="info.category == 'select'" value="select">Select</option><option ng-repeat="category in info.categories track by $index" value="{{category.category_id}}" ng-selected="info.category == category.category_id">{{category.category}}</option></select></div></div><div class="form-group margin-btm-5"><label for="inputAuthor" class="col-sm-2 control-label font-size-10 font-weight-100">Author<span class="color-red">*</span></label><div class="col-sm-10"><input type="text" class="form-control" id="inputAuthor" ng-model="info.author" placeholder="Author" ng-focus="focusElement('other')" ng-change="setUnsavedMode()"></div></div><div class="form-group margin-btm-5"><label for="inputSeverity" class="col-sm-2 control-label font-size-10 font-weight-100">Severity<span class="color-red">*</span></label><div class="col-sm-10"><select name="inputSeverity" id="inputSeverity" ng-model="info.severity" class="form-control font-size-12 padding-left-3" ng-focus="focusElement('other')" ng-change="setUnsavedMode()"><option ng-if="info.severity == 'select'" value="select">Select</option><option ng-repeat="severity in info.severities track by $index" ng-if="severity.is_enable == '1'" value="{{severity.severity_id}}" ng-selected="info.severity == severity.severity_id">{{severity.severity}}</option></select></div></div><div class="form-group margin-btm-5"><label for="inputPriority" class="col-sm-2 control-label font-size-10 font-weight-100">Priority<span class="color-red">*</span></label><div class="col-sm-10"><select name="inputPriority" id="inputPriority" ng-model="info.priority" class="form-control font-size-12 padding-left-3" ng-focus="focusElement('other')" ng-change="setUnsavedMode()"><option ng-if="info.priority == 'select'" value="select">Select</option><option ng-repeat="priority in info.priorities track by $index" ng-if="priority.is_enable == '1'" value="{{priority.priority_id}}" ng-selected="info.priority == priority.priority_id">{{priority.priority}}</option></select></div></div><div class="form-group margin-btm-5"><label for="inputScope" class="col-sm-2 control-label font-size-10 font-weight-100">Scope<span class="color-red">*</span></label><div class="col-sm-10"><select name="inputScope" id="inputScope" ng-model="info.scope" class="form-control font-size-12 padding-left-3" ng-focus="focusElement('other')" ng-change="setUnsavedMode()"><option ng-if="info.scope == 'select'" value="select">Select</option><option ng-repeat="scope in info.scopes track by $index" value="{{scope}}" ng-selected="info.scope == scope">{{scope=='Table'?'Row':scope}}</option></select></div></div><div class="form-group margin-btm-5"><label for="inputAction" class="col-sm-2 control-label font-size-10 font-weight-100">Action</label><div class="col-sm-10"><select name="inputAction" ng-model="info.action" id="inputAction" class="form-control font-size-12 padding-left-3" ng-focus="focusElement('other')" ng-change="setUnsavedMode()"><option value="none">Persist</option><option value="mail">Persist and e-mail</option></select></div></div><div class="form-group margin-btm-5" ng-if="info.action == 'mail'"><label for="inputEmailTemplate" class="col-sm-2 control-label font-size-10 font-weight-100">Email Template<span class="color-red">*</span></label><div class="col-sm-10"><select name="inputEmailTemplate" ng-model="info.emailTemplate" id="inputEmailTemplate" class="form-control font-size-12 padding-left-3" ng-focus="focusElement('other')" ng-change="setUnsavedMode()" z><option ng-if="info.emailTemplate == 'select'" value="select" ng-selected="info.emailTemplate == 'select'">Select</option><option ng-repeat="template in info.templates track by $index" value="{{template.template_id}}" ng-selected="info.emailTemplate == template.template_id">{{template.template_name}}</option></select></div></div><div class="form-group margin-btm-5"><label for="inputMaxLimit" class="col-sm-2 control-label font-size-10 font-weight-100">Max Limit<span class="color-red">*</span></label><div class="col-sm-10"><select name="inputMaxLimit" ng-model="info.maxLimit" id="inputMaxLimit" class="form-control font-size-12 padding-left-3" ng-focus="focusElement('other')" ng-change="setUnsavedMode()"><option ng-repeat="limit in info.maxLimits track by $index" value="{{limit}}" ng-selected="info.maxLimit == limit">{{limit}}</option></select></div></div><div class="form-group margin-btm-5"><label for="inputKBLink" class="col-sm-2 control-label font-size-10 font-weight-100">KB Link</label><div class="col-sm-10"><input type="text" ng-model="info.kbLink" class="form-control" id="inputKBLink" placeholder="KB Link" ng-focus="focusElement('other')" ng-change="setUnsavedMode()"></div></div><div class="form-group margin-btm-5"><label for="inputRecommendation" class="col-sm-2 control-label font-size-10 font-weight-100">Recommendation</label><div class="col-sm-10 gb-rules-recommendation"><div contenteditable="true" id="inputRecommendation" class="form-control gb-rules-recommendation-link" ng-click="focusElement('other')" ng-keypress="setUnsavedMode()"></div></div></div><div class="form-group margin-btm-5"><label for="inputActualTable" class="col-sm-2 control-label font-size-10 font-weight-100">Actual Tables<span class="color-red">*</span></label><div class="col-sm-10"><textarea class="form-control" id="inputActualTable" ng-model="info.tables" placeholder="Tables name separeted by comma(,)" ng-focus="focusElement('other')" ng-change="setUnsavedMode()"></textarea></div></div><div class="form-group margin-btm-5"><label for="inputText" class="col-sm-2 control-label font-size-10 font-weight-100">Text<span class="color-red">*</span></label><div class="col-sm-10"><textarea class="form-control" id="inputText" ng-model="info.text" placeholder="Text" ng-drop="true" ng-drop-success="onDropText($data, $event)" ng-focus="focusElement('text')" ng-change="setUnsavedMode()"></textarea> <input type="hidden" id="hiddenText" ng-model="info.hiddenText"></div></div><div class="form-group margin-btm-5"><label for="inputCol0" class="col-sm-2 control-label font-size-10 font-weight-100">Col0<span class="color-red">*</span></label><div class="col-sm-10"><textarea class="form-control" id="inputCol0" ng-model="info.col0" placeholder="Col0" ng-focus="focusElement('other')" ng-change="setUnsavedMode()"></textarea></div></div><div class="form-group margin-btm-5"><label for="inputCol1" class="col-sm-2 control-label font-size-10 font-weight-100">Col1<span class="color-red">*</span></label><div class="col-sm-10"><textarea class="form-control" id="inputCol1" ng-model="info.col1" placeholder="Col1" ng-focus="focusElement('other')" ng-change="setUnsavedMode()"></textarea></div></div><div class="form-group margin-btm-5"><label for="inputCol2" class="col-sm-2 control-label font-size-10 font-weight-100">Col2<span class="color-red">*</span></label><div class="col-sm-10"><textarea class="form-control" id="inputCol2" ng-model="info.col2" placeholder="Col2" ng-focus="focusElement('other')" ng-change="setUnsavedMode()"></textarea> <input type="hidden" id="hiddenText" ng-model="info.hiddenText"></div></div><div class="form-group margin-btm-5"><label for="inputCol3" class="col-sm-2 control-label font-size-10 font-weight-100">Col3<span class="color-red">*</span></label><div class="col-sm-10"><textarea class="form-control" id="inputCol3" ng-model="info.col3" placeholder="Col3" ng-focus="focusElement('other')" ng-change="setUnsavedMode()"></textarea></div></div><div class="form-group"><div class="col-sm-2"></div><div class="col-sm-10"><button type="button" id="gb-unsupported-ra-submit" class="btn-primary input-sm border-width-1 gb-rules-btn" ng-click="submitRule()">Submit</button> <button type="button" id="gb-unsupported-ra-test" class="btn-primary input-sm border-width-1 gb-rules-btn" ng-if="info.ruleAdded && info.ruleAddedAsDraft" ng-click="testRule()">Test Rule</button> <button type="button" id="gb-unsupported-ra-addnew" class="btn-primary input-sm border-width-1 gb-rules-btn" ng-if="info.ruleAdded" ng-click="addNewRule()">Add New</button></div></div></form></div><div class="gb-rules-operators-functions width-120"><div class="gb-rules-functions"><div class="gb-rules-functions-header font-size-12">Function(s)</div><div class="gb-rules-functions-contents font-size-10 font-weight-bold"><span ng-repeat="function in info.functions track by $index"><span title="{{function.tooltip}}" class="drag-object color-428bca font-weight-bold" ng-dblclick="addLogicText([null, function])">{{function.label}} <span ng-drag="true" ng-drag-data="[null, function]"></span> </span><span ng-if="!$last" class="gb-rules-comma-separator">,&nbsp;</span></span></div></div></div></div></div></div></div><div ng-drag-clone="" class="font-size-10">{{clonedData[1].label}}</div>