/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ContentChild, ContentChildren, ElementRef, EventEmitter, HostBinding, Input, Output, QueryList, ViewChild, ViewEncapsulation, Attribute, Renderer2, Optional } from '@angular/core';
import { DEFAULT_OUTLINE_PREFIX, DEFAULT_PREFIX, DEFAULT_PRETTY_CLASS_NAME } from '../model/params';
import { NgxPrettyHoverComponent } from './ngx-pretty-hover.component';
import { NgxPrettyIconDirective } from '../directives/ngx-pretty-icon.directive';
import { NgxPrettyImageDirective } from '../directives/ngx-pretty-image.directive';
import { NgxPrettySvgDirective } from '../directives/ngx-pretty-svg.directive';
import { NgxPrettyToggleComponent } from './ngx-pretty-toggle.component';
import { PrettyCheckboxAnimation, PrettyCheckboxColor, PrettyCheckboxShape, PrettyCheckboxStroke } from '../model/interfaces';
import { NgxPrettyHoverWillChangeComponent } from './ngx-pretty-hover-will-change.component';
import { NgxPrettyToggleWillChangeComponent } from './ngx-pretty-toggle-will-change.component';
import { NgxPrettyRadioGroupDirective } from './ngx-pretty-radio-group.component';
import { strToBoolean } from '../utility';
// tslint:disable:use-host-property-decorator
export class NgxPrettyRadioComponent {
    /**
     * @param {?} renderer
     * @param {?} el
     * @param {?} radioGroup
     * @param {?} _stroke
     * @param {?} _shape
     * @param {?} _animation
     * @param {?=} _isSwitch
     * @param {?=} _bigger
     * @param {?=} _enableFocus
     * @param {?=} _plain
     * @param {?=} _outline
     * @param {?=} _color
     * @param {?=} _name
     */
    constructor(renderer, el, radioGroup, _stroke, _shape, _animation, _isSwitch = false, _bigger = false, _enableFocus = false, _plain = false, _outline = false, _color, _name) {
        this.renderer = renderer;
        this.el = el;
        this.radioGroup = radioGroup;
        this._stroke = _stroke;
        this._shape = _shape;
        this._animation = _animation;
        this._isSwitch = _isSwitch;
        this._bigger = _bigger;
        this._enableFocus = _enableFocus;
        this._plain = _plain;
        this._outline = _outline;
        this._color = _color;
        this._name = _name;
        this._prefix = DEFAULT_PREFIX;
        this._outlinePrefix = DEFAULT_OUTLINE_PREFIX;
        this.checked = false;
        this.disabled = false;
        this.lock = false;
        this.change = new EventEmitter();
        if (!this._name && this.radioGroup) {
            this._name = this.radioGroup.name;
        }
        this._isSwitch = strToBoolean(this._isSwitch);
        this._bigger = strToBoolean(this._bigger);
        this._enableFocus = strToBoolean(this._enableFocus);
        this._plain = strToBoolean(this._plain);
        this._outline = strToBoolean(this._outline);
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        /** @type {?} */
        const el = this.el.nativeElement;
        if (this._isSwitch) {
            this.renderer.addClass(el, `${DEFAULT_PREFIX}switch`);
        }
        if (this._bigger) {
            this.renderer.addClass(el, `${DEFAULT_PREFIX}bigger`);
        }
        if (this._enableFocus) {
            this.renderer.addClass(el, `${DEFAULT_PREFIX}has-focus`);
        }
        if (this._plain) {
            this.renderer.addClass(el, `${DEFAULT_PREFIX}plain`);
        }
        if (this._stroke) {
            this.renderer.addClass(el, `${DEFAULT_PREFIX}${this._stroke}`);
        }
        if (this._shape) {
            this.renderer.addClass(el, `${DEFAULT_PREFIX}${this._shape}`);
        }
        if (this._animation) {
            this.renderer.addClass(el, `${DEFAULT_PREFIX}${this._animation}`);
        }
        if (this._iconDir) {
            this.renderer.addClass(el, `${DEFAULT_PREFIX}icon`);
        }
        if (this._svgDir) {
            this.renderer.addClass(el, `${DEFAULT_PREFIX}svg`);
        }
        if (this._imgDir) {
            this.renderer.addClass(el, `${DEFAULT_PREFIX}image`);
        }
        if (this._hoverDir || this._hoverWillChangeDir) {
            this.renderer.addClass(el, `${DEFAULT_PREFIX}has-hover`);
        }
        if (this._isToggle) {
            this.renderer.addClass(el, `${DEFAULT_PREFIX}toggle`);
        }
        if (!this._isSwitch && !this._iconDir && !this._svgDir && !this._imgDir) {
            this.renderer.addClass(el, `${DEFAULT_PREFIX}default`);
        }
        // STATE ELEM
        if (this._color && !this._isToggle) {
            this.renderer.addClass(this._stateElem.nativeElement, `${DEFAULT_PREFIX}${this._color}${this._outline ? DEFAULT_OUTLINE_PREFIX : ''}`);
        }
    }
    // ---------- METHODS ---------
    /**
     * @param {?} event
     * @param {?} checked
     * @param {?} value
     * @return {?}
     */
    _onChange(event, checked, value) {
        // I stop propagation on the change event.
        // Otherwise the change event, from the input element, will bubble up and
        event.stopPropagation();
        this.change.emit({ value, checked, event });
        if (this.radioGroup) {
            this.radioGroup._emitChange({ value, checked, event });
        }
    }
    /**
     * @return {?}
     */
    get _isToggle() { return this._toggleComps.length === 2 || this._toggleWillChangeComps.length === 2; }
}
NgxPrettyRadioComponent.decorators = [
    { type: Component, args: [{
                selector: 'ngx-pretty-radio:not([will-change]), p-radio:not([will-change])',
                template: `
    <input
      #inputElem
      type="radio"
      [name]="_name"
      [value]="value"
      [checked]="checked"
      [disabled]="disabled"
      (change)="_onChange($event, inputElem.checked, inputElem.value)"/>

    <div #stateElem *ngIf="!_isToggle" class="state">

      <ng-content select="[pIcon], [p-icon], [pSvg], [p-svg], [pImage], [p-image]"></ng-content>
      <label><ng-content></ng-content></label>

    </div>

    <ng-content select="ngx-p-hover, p-hover, ngx-p-toggle, p-toggle"></ng-content>
  `,
                // changeDetection: ChangeDetectionStrategy.OnPush,
                encapsulation: ViewEncapsulation.None,
                host: {
                    'class': DEFAULT_PRETTY_CLASS_NAME
                },
                exportAs: 'ngxPrettyRadio'
            }] }
];
/** @nocollapse */
NgxPrettyRadioComponent.ctorParameters = () => [
    { type: Renderer2 },
    { type: ElementRef },
    { type: NgxPrettyRadioGroupDirective, decorators: [{ type: Optional }] },
    { type: PrettyCheckboxStroke, decorators: [{ type: Attribute, args: ['stroke',] }] },
    { type: PrettyCheckboxShape, decorators: [{ type: Attribute, args: ['shape',] }] },
    { type: PrettyCheckboxAnimation, decorators: [{ type: Attribute, args: ['animation',] }] },
    { type: undefined, decorators: [{ type: Attribute, args: ['isSwitch',] }] },
    { type: undefined, decorators: [{ type: Attribute, args: ['bigger',] }] },
    { type: undefined, decorators: [{ type: Attribute, args: ['enableFocus',] }] },
    { type: undefined, decorators: [{ type: Attribute, args: ['plain',] }] },
    { type: undefined, decorators: [{ type: Attribute, args: ['outline',] }] },
    { type: PrettyCheckboxColor, decorators: [{ type: Attribute, args: ['color',] }] },
    { type: String, decorators: [{ type: Attribute, args: ['name',] }] }
];
NgxPrettyRadioComponent.propDecorators = {
    checked: [{ type: Input }],
    disabled: [{ type: Input }],
    value: [{ type: Input }],
    lock: [{ type: HostBinding, args: [`class.${DEFAULT_PREFIX}locked`,] }, { type: Input }],
    _inputElem: [{ type: ViewChild, args: ['inputElem', { static: true },] }],
    _stateElem: [{ type: ViewChild, args: ['stateElem', { static: false },] }],
    change: [{ type: Output }],
    _iconDir: [{ type: ContentChild, args: [NgxPrettyIconDirective, { static: false },] }],
    _svgDir: [{ type: ContentChild, args: [NgxPrettySvgDirective, { static: false },] }],
    _imgDir: [{ type: ContentChild, args: [NgxPrettyImageDirective, { static: false },] }],
    _hoverDir: [{ type: ContentChild, args: [NgxPrettyHoverComponent, { static: false },] }],
    _hoverWillChangeDir: [{ type: ContentChild, args: [NgxPrettyHoverWillChangeComponent, { static: false },] }],
    _toggleComps: [{ type: ContentChildren, args: [NgxPrettyToggleComponent,] }],
    _toggleWillChangeComps: [{ type: ContentChildren, args: [NgxPrettyToggleWillChangeComponent,] }]
};
if (false) {
    /** @type {?} */
    NgxPrettyRadioComponent.prototype._prefix;
    /** @type {?} */
    NgxPrettyRadioComponent.prototype._outlinePrefix;
    /** @type {?} */
    NgxPrettyRadioComponent.prototype.checked;
    /** @type {?} */
    NgxPrettyRadioComponent.prototype.disabled;
    /** @type {?} */
    NgxPrettyRadioComponent.prototype.value;
    /** @type {?} */
    NgxPrettyRadioComponent.prototype.lock;
    /**
     * @type {?}
     * @private
     */
    NgxPrettyRadioComponent.prototype._inputElem;
    /**
     * @type {?}
     * @private
     */
    NgxPrettyRadioComponent.prototype._stateElem;
    /** @type {?} */
    NgxPrettyRadioComponent.prototype.change;
    /**
     * @type {?}
     * @private
     */
    NgxPrettyRadioComponent.prototype._iconDir;
    /**
     * @type {?}
     * @private
     */
    NgxPrettyRadioComponent.prototype._svgDir;
    /**
     * @type {?}
     * @private
     */
    NgxPrettyRadioComponent.prototype._imgDir;
    /**
     * @type {?}
     * @private
     */
    NgxPrettyRadioComponent.prototype._hoverDir;
    /**
     * @type {?}
     * @private
     */
    NgxPrettyRadioComponent.prototype._hoverWillChangeDir;
    /** @type {?} */
    NgxPrettyRadioComponent.prototype._toggleComps;
    /** @type {?} */
    NgxPrettyRadioComponent.prototype._toggleWillChangeComps;
    /**
     * @type {?}
     * @private
     */
    NgxPrettyRadioComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    NgxPrettyRadioComponent.prototype.el;
    /**
     * @type {?}
     * @private
     */
    NgxPrettyRadioComponent.prototype.radioGroup;
    /**
     * @type {?}
     * @private
     */
    NgxPrettyRadioComponent.prototype._stroke;
    /**
     * @type {?}
     * @private
     */
    NgxPrettyRadioComponent.prototype._shape;
    /**
     * @type {?}
     * @private
     */
    NgxPrettyRadioComponent.prototype._animation;
    /**
     * @type {?}
     * @private
     */
    NgxPrettyRadioComponent.prototype._isSwitch;
    /**
     * @type {?}
     * @private
     */
    NgxPrettyRadioComponent.prototype._bigger;
    /**
     * @type {?}
     * @private
     */
    NgxPrettyRadioComponent.prototype._enableFocus;
    /**
     * @type {?}
     * @private
     */
    NgxPrettyRadioComponent.prototype._plain;
    /**
     * @type {?}
     * @private
     */
    NgxPrettyRadioComponent.prototype._outline;
    /**
     * @type {?}
     * @private
     */
    NgxPrettyRadioComponent.prototype._color;
    /** @type {?} */
    NgxPrettyRadioComponent.prototype._name;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXByZXR0eS1yYWRpby5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZ3gtcHJldHR5LWNoZWNrYm94LyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvbmd4LXByZXR0eS1yYWRpby5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsWUFBWSxFQUNaLGVBQWUsRUFDZixVQUFVLEVBQ1YsWUFBWSxFQUNaLFdBQVcsRUFDWCxLQUFLLEVBQ0wsTUFBTSxFQUNOLFNBQVMsRUFDVCxTQUFTLEVBQ1QsaUJBQWlCLEVBQ2pCLFNBQVMsRUFFVCxTQUFTLEVBQ1QsUUFBUSxFQUVQLE1BQU0sZUFBZSxDQUFDO0FBQ3pCLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxjQUFjLEVBQUUseUJBQXlCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNwRyxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUN2RSxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSx5Q0FBeUMsQ0FBQztBQUNqRixPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQztBQUNuRixPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSx3Q0FBd0MsQ0FBQztBQUMvRSxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUN6RSxPQUFPLEVBQ0wsdUJBQXVCLEVBQ3ZCLG1CQUFtQixFQUNuQixtQkFBbUIsRUFDbkIsb0JBQW9CLEVBRW5CLE1BQU0scUJBQXFCLENBQUM7QUFDL0IsT0FBTyxFQUFFLGlDQUFpQyxFQUFFLE1BQU0sMENBQTBDLENBQUM7QUFDN0YsT0FBTyxFQUFFLGtDQUFrQyxFQUFFLE1BQU0sMkNBQTJDLENBQUM7QUFDL0YsT0FBTyxFQUFFLDRCQUE0QixFQUFFLE1BQU0sb0NBQW9DLENBQUM7QUFDbEYsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLFlBQVks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QXlDOztJQUN6QyxpREFBd0Q7O0lBR3hELDBDQUF5Qjs7SUFDekIsMkNBQTBCOztJQUMxQix3Q0FBZTs7SUFFZix1Q0FDc0I7Ozs7O0lBR3RCLDZDQUF5RTs7Ozs7SUFDekUsNkNBQTBFOztJQUUxRSx5Q0FBeUQ7Ozs7O0lBR3pELDJDQUFnRzs7Ozs7SUFDaEcsMENBQTZGOzs7OztJQUM3RiwwQ0FBaUc7Ozs7O0lBRWpHLDRDQUFtRzs7Ozs7SUFDbkcsc0RBQWlJOztJQUVqSSwrQ0FBb0c7O0lBQ3BHLHlEQUFrSTs7Ozs7SUFHaEksMkNBQTJCOzs7OztJQUMzQixxQ0FBc0I7Ozs7O0lBQ3RCLDZDQUE0RDs7Ozs7SUFFNUQsMENBQStEOzs7OztJQUMvRCx5Q0FBNkQ7Ozs7O0lBQzdELDZDQUFxRTs7Ozs7SUFDckUsNENBQW1EOzs7OztJQUNuRCwwQ0FBaUQ7Ozs7O0lBQ2pELCtDQUFzRDs7Ozs7SUFDdEQseUNBQWdEOzs7OztJQUVoRCwyQ0FBOEM7Ozs7O0lBQzlDLHlDQUF5RDs7SUFDekQsd0NBQXlDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBDb21wb25lbnQsXHJcbiAgQ29udGVudENoaWxkLFxyXG4gIENvbnRlbnRDaGlsZHJlbixcclxuICBFbGVtZW50UmVmLFxyXG4gIEV2ZW50RW1pdHRlcixcclxuICBIb3N0QmluZGluZyxcclxuICBJbnB1dCxcclxuICBPdXRwdXQsXHJcbiAgUXVlcnlMaXN0LFxyXG4gIFZpZXdDaGlsZCxcclxuICBWaWV3RW5jYXBzdWxhdGlvbixcclxuICBBdHRyaWJ1dGUsXHJcbiAgQWZ0ZXJWaWV3SW5pdCxcclxuICBSZW5kZXJlcjIsXHJcbiAgT3B0aW9uYWwsXHJcbiAgT25Jbml0XHJcbiAgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgREVGQVVMVF9PVVRMSU5FX1BSRUZJWCwgREVGQVVMVF9QUkVGSVgsIERFRkFVTFRfUFJFVFRZX0NMQVNTX05BTUUgfSBmcm9tICcuLi9tb2RlbC9wYXJhbXMnO1xyXG5pbXBvcnQgeyBOZ3hQcmV0dHlIb3ZlckNvbXBvbmVudCB9IGZyb20gJy4vbmd4LXByZXR0eS1ob3Zlci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBOZ3hQcmV0dHlJY29uRGlyZWN0aXZlIH0gZnJvbSAnLi4vZGlyZWN0aXZlcy9uZ3gtcHJldHR5LWljb24uZGlyZWN0aXZlJztcclxuaW1wb3J0IHsgTmd4UHJldHR5SW1hZ2VEaXJlY3RpdmUgfSBmcm9tICcuLi9kaXJlY3RpdmVzL25neC1wcmV0dHktaW1hZ2UuZGlyZWN0aXZlJztcclxuaW1wb3J0IHsgTmd4UHJldHR5U3ZnRGlyZWN0aXZlIH0gZnJvbSAnLi4vZGlyZWN0aXZlcy9uZ3gtcHJldHR5LXN2Zy5kaXJlY3RpdmUnO1xyXG5pbXBvcnQgeyBOZ3hQcmV0dHlUb2dnbGVDb21wb25lbnQgfSBmcm9tICcuL25neC1wcmV0dHktdG9nZ2xlLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7XHJcbiAgUHJldHR5Q2hlY2tib3hBbmltYXRpb24sXHJcbiAgUHJldHR5Q2hlY2tib3hDb2xvcixcclxuICBQcmV0dHlDaGVja2JveFNoYXBlLFxyXG4gIFByZXR0eUNoZWNrYm94U3Ryb2tlLFxyXG4gIFByZXR0eVJhZGlvQ2hhbmdlXHJcbiAgfSBmcm9tICcuLi9tb2RlbC9pbnRlcmZhY2VzJztcclxuaW1wb3J0IHsgTmd4UHJldHR5SG92ZXJXaWxsQ2hhbmdlQ29tcG9uZW50IH0gZnJvbSAnLi9uZ3gtcHJldHR5LWhvdmVyLXdpbGwtY2hhbmdlLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IE5neFByZXR0eVRvZ2dsZVdpbGxDaGFuZ2VDb21wb25lbnQgfSBmcm9tICcuL25neC1wcmV0dHktdG9nZ2xlLXdpbGwtY2hhbmdlLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IE5neFByZXR0eVJhZGlvR3JvdXBEaXJlY3RpdmUgfSBmcm9tICcuL25neC1wcmV0dHktcmFkaW8tZ3JvdXAuY29tcG9uZW50JztcclxuaW1wb3J0IHsgc3RyVG9Cb29sZWFuIH0gZnJvbSAnLi4vdXRpbGl0eSc7XHJcbi8vIHRzbGludDpkaXNhYmxlOnVzZS1ob3N0LXByb3BlcnR5LWRlY29yYXRvclxyXG5cclxuXHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ25neC1wcmV0dHktcmFkaW86bm90KFt3aWxsLWNoYW5nZV0pLCBwLXJhZGlvOm5vdChbd2lsbC1jaGFuZ2VdKScsXHJcbiAgdGVtcGxhdGU6IGBcclxuICAgIDxpbnB1dFxyXG4gICAgICAjaW5wdXRFbGVtXHJcbiAgICAgIHR5cGU9XCJyYWRpb1wiXHJcbiAgICAgIFtuYW1lXT1cIl9uYW1lXCJcclxuICAgICAgW3ZhbHVlXT1cInZhbHVlXCJcclxuICAgICAgW2NoZWNrZWRdPVwiY2hlY2tlZFwiXHJcbiAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXHJcbiAgICAgIChjaGFuZ2UpPVwiX29uQ2hhbmdlKCRldmVudCwgaW5wdXRFbGVtLmNoZWNrZWQsIGlucHV0RWxlbS52YWx1ZSlcIi8+XHJcblxyXG4gICAgPGRpdiAjc3RhdGVFbGVtICpuZ0lmPVwiIV9pc1RvZ2dsZVwiIGNsYXNzPVwic3RhdGVcIj5cclxuXHJcbiAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cIltwSWNvbl0sIFtwLWljb25dLCBbcFN2Z10sIFtwLXN2Z10sIFtwSW1hZ2VdLCBbcC1pbWFnZV1cIj48L25nLWNvbnRlbnQ+XHJcbiAgICAgIDxsYWJlbD48bmctY29udGVudD48L25nLWNvbnRlbnQ+PC9sYWJlbD5cclxuXHJcbiAgICA8L2Rpdj5cclxuXHJcbiAgICA8bmctY29udGVudCBzZWxlY3Q9XCJuZ3gtcC1ob3ZlciwgcC1ob3Zlciwgbmd4LXAtdG9nZ2xlLCBwLXRvZ2dsZVwiPjwvbmctY29udGVudD5cclxuICBgLFxyXG4gIC8vIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxyXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbiAgaG9zdDoge1xyXG4gICAgJ2NsYXNzJzogREVGQVVMVF9QUkVUVFlfQ0xBU1NfTkFNRVxyXG4gIH0sXHJcbiAgZXhwb3J0QXM6ICduZ3hQcmV0dHlSYWRpbydcclxufSlcclxuZXhwb3J0IGNsYXNzIE5neFByZXR0eVJhZGlvQ29tcG9uZW50IGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCB7XHJcblxyXG4gIHB1YmxpYyByZWFkb25seSBfcHJlZml4ID0gREVGQVVMVF9QUkVGSVg7XHJcbiAgcHVibGljIHJlYWRvbmx5IF9vdXRsaW5lUHJlZml4ID0gREVGQVVMVF9PVVRMSU5FX1BSRUZJWDtcclxuXHJcblxyXG4gIEBJbnB1dCgpIGNoZWNrZWQgPSBmYWxzZTtcclxuICBASW5wdXQoKSBkaXNhYmxlZCA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIHZhbHVlO1xyXG5cclxuICBASG9zdEJpbmRpbmcoYGNsYXNzLiR7REVGQVVMVF9QUkVGSVh9bG9ja2VkYClcclxuICBASW5wdXQoKSBsb2NrID0gZmFsc2U7XHJcblxyXG5cclxuICBAVmlld0NoaWxkKCdpbnB1dEVsZW0nLCB7IHN0YXRpYzogdHJ1ZSB9KSBwcml2YXRlIF9pbnB1dEVsZW06IEVsZW1lbnRSZWY7XHJcbiAgQFZpZXdDaGlsZCgnc3RhdGVFbGVtJywgeyBzdGF0aWM6IGZhbHNlIH0pIHByaXZhdGUgX3N0YXRlRWxlbTogRWxlbWVudFJlZjtcclxuXHJcbiAgQE91dHB1dCgpIGNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8UHJldHR5UmFkaW9DaGFuZ2U+KCk7XHJcblxyXG5cclxuICBAQ29udGVudENoaWxkKE5neFByZXR0eUljb25EaXJlY3RpdmUsIHtzdGF0aWM6IGZhbHNlfSkgcHJpdmF0ZSBfaWNvbkRpcjogTmd4UHJldHR5SWNvbkRpcmVjdGl2ZTtcclxuICBAQ29udGVudENoaWxkKE5neFByZXR0eVN2Z0RpcmVjdGl2ZSwge3N0YXRpYzogZmFsc2V9KSBwcml2YXRlIF9zdmdEaXI6IE5neFByZXR0eVN2Z0RpcmVjdGl2ZTtcclxuICBAQ29udGVudENoaWxkKE5neFByZXR0eUltYWdlRGlyZWN0aXZlLCB7c3RhdGljOiBmYWxzZX0pIHByaXZhdGUgX2ltZ0RpcjogTmd4UHJldHR5SW1hZ2VEaXJlY3RpdmU7XHJcblxyXG4gIEBDb250ZW50Q2hpbGQoTmd4UHJldHR5SG92ZXJDb21wb25lbnQsIHtzdGF0aWM6IGZhbHNlfSkgcHJpdmF0ZSBfaG92ZXJEaXI6IE5neFByZXR0eUhvdmVyQ29tcG9uZW50O1xyXG4gIEBDb250ZW50Q2hpbGQoTmd4UHJldHR5SG92ZXJXaWxsQ2hhbmdlQ29tcG9uZW50LCB7c3RhdGljOiBmYWxzZX0pIHByaXZhdGUgX2hvdmVyV2lsbENoYW5nZURpcjogTmd4UHJldHR5SG92ZXJXaWxsQ2hhbmdlQ29tcG9uZW50O1xyXG5cclxuICBAQ29udGVudENoaWxkcmVuKE5neFByZXR0eVRvZ2dsZUNvbXBvbmVudCkgcHVibGljIF90b2dnbGVDb21wczogUXVlcnlMaXN0PE5neFByZXR0eVRvZ2dsZUNvbXBvbmVudD47XHJcbiAgQENvbnRlbnRDaGlsZHJlbihOZ3hQcmV0dHlUb2dnbGVXaWxsQ2hhbmdlQ29tcG9uZW50KSBwdWJsaWMgX3RvZ2dsZVdpbGxDaGFuZ2VDb21wczogUXVlcnlMaXN0PE5neFByZXR0eVRvZ2dsZVdpbGxDaGFuZ2VDb21wb25lbnQ+O1xyXG5cclxuICBjb25zdHJ1Y3RvciAoXHJcbiAgICBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIsXHJcbiAgICBwcml2YXRlIGVsOiBFbGVtZW50UmVmLFxyXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSByYWRpb0dyb3VwOiBOZ3hQcmV0dHlSYWRpb0dyb3VwRGlyZWN0aXZlLFxyXG5cclxuICAgIEBBdHRyaWJ1dGUoJ3N0cm9rZScpICAgICAgcHJpdmF0ZSBfc3Ryb2tlOiBQcmV0dHlDaGVja2JveFN0cm9rZSxcclxuICAgIEBBdHRyaWJ1dGUoJ3NoYXBlJykgICAgICAgcHJpdmF0ZSBfc2hhcGU6IFByZXR0eUNoZWNrYm94U2hhcGUsXHJcbiAgICBAQXR0cmlidXRlKCdhbmltYXRpb24nKSAgIHByaXZhdGUgX2FuaW1hdGlvbjogUHJldHR5Q2hlY2tib3hBbmltYXRpb24sXHJcbiAgICBAQXR0cmlidXRlKCdpc1N3aXRjaCcpICAgIHByaXZhdGUgX2lzU3dpdGNoID0gZmFsc2UsXHJcbiAgICBAQXR0cmlidXRlKCdiaWdnZXInKSAgICAgIHByaXZhdGUgX2JpZ2dlciA9IGZhbHNlLFxyXG4gICAgQEF0dHJpYnV0ZSgnZW5hYmxlRm9jdXMnKSBwcml2YXRlIF9lbmFibGVGb2N1cyA9IGZhbHNlLFxyXG4gICAgQEF0dHJpYnV0ZSgncGxhaW4nKSAgICAgICBwcml2YXRlIF9wbGFpbiA9IGZhbHNlLFxyXG5cclxuICAgIEBBdHRyaWJ1dGUoJ291dGxpbmUnKSBwcml2YXRlIF9vdXRsaW5lID0gZmFsc2UsXHJcbiAgICBAQXR0cmlidXRlKCdjb2xvcicpICAgcHJpdmF0ZSBfY29sb3I6IFByZXR0eUNoZWNrYm94Q29sb3IsXHJcbiAgICBAQXR0cmlidXRlKCduYW1lJykgICBwdWJsaWMgX25hbWU6IHN0cmluZyxcclxuICAgICkge1xyXG4gICAgICBpZiAoIXRoaXMuX25hbWUgJiYgdGhpcy5yYWRpb0dyb3VwKSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IHRoaXMucmFkaW9Hcm91cC5uYW1lO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLl9pc1N3aXRjaCAgICA9IHN0clRvQm9vbGVhbih0aGlzLl9pc1N3aXRjaCk7XHJcbiAgICAgIHRoaXMuX2JpZ2dlciAgICAgID0gc3RyVG9Cb29sZWFuKHRoaXMuX2JpZ2dlcik7XHJcbiAgICAgIHRoaXMuX2VuYWJsZUZvY3VzID0gc3RyVG9Cb29sZWFuKHRoaXMuX2VuYWJsZUZvY3VzKTtcclxuICAgICAgdGhpcy5fcGxhaW4gICAgICAgPSBzdHJUb0Jvb2xlYW4odGhpcy5fcGxhaW4pO1xyXG4gICAgICB0aGlzLl9vdXRsaW5lICAgICA9IHN0clRvQm9vbGVhbih0aGlzLl9vdXRsaW5lKTtcclxuICAgIH1cclxuXHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuICAgIGNvbnN0IGVsID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50O1xyXG5cclxuICAgIGlmICh0aGlzLl9pc1N3aXRjaCkgICAgeyB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGVsLCBgJHtERUZBVUxUX1BSRUZJWH1zd2l0Y2hgKTsgfVxyXG4gICAgaWYgKHRoaXMuX2JpZ2dlcikgICAgICB7IHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoZWwsIGAke0RFRkFVTFRfUFJFRklYfWJpZ2dlcmApOyB9XHJcbiAgICBpZiAodGhpcy5fZW5hYmxlRm9jdXMpIHsgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhlbCwgYCR7REVGQVVMVF9QUkVGSVh9aGFzLWZvY3VzYCk7IH1cclxuICAgIGlmICh0aGlzLl9wbGFpbikgICAgICAgeyB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGVsLCBgJHtERUZBVUxUX1BSRUZJWH1wbGFpbmApOyB9XHJcblxyXG4gICAgaWYgKHRoaXMuX3N0cm9rZSkgICAgIHsgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhlbCwgYCR7REVGQVVMVF9QUkVGSVh9JHt0aGlzLl9zdHJva2V9YCk7IH1cclxuICAgIGlmICh0aGlzLl9zaGFwZSkgICAgICB7IHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoZWwsIGAke0RFRkFVTFRfUFJFRklYfSR7dGhpcy5fc2hhcGV9YCk7IH1cclxuICAgIGlmICh0aGlzLl9hbmltYXRpb24pICB7IHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoZWwsIGAke0RFRkFVTFRfUFJFRklYfSR7dGhpcy5fYW5pbWF0aW9ufWApOyB9XHJcblxyXG4gICAgaWYgKHRoaXMuX2ljb25EaXIpICAgICAgICAgIHsgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhlbCwgYCR7REVGQVVMVF9QUkVGSVh9aWNvbmApOyB9XHJcbiAgICBpZiAodGhpcy5fc3ZnRGlyKSAgICAgICAgICAgeyB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGVsLCBgJHtERUZBVUxUX1BSRUZJWH1zdmdgKTsgfVxyXG4gICAgaWYgKHRoaXMuX2ltZ0RpcikgICAgICAgICAgIHsgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhlbCwgYCR7REVGQVVMVF9QUkVGSVh9aW1hZ2VgKTsgfVxyXG5cclxuICAgIGlmICh0aGlzLl9ob3ZlckRpciB8fCB0aGlzLl9ob3ZlcldpbGxDaGFuZ2VEaXIpIHtcclxuICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhlbCwgYCR7REVGQVVMVF9QUkVGSVh9aGFzLWhvdmVyYCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuX2lzVG9nZ2xlKSB7IHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoZWwsIGAke0RFRkFVTFRfUFJFRklYfXRvZ2dsZWApOyB9XHJcblxyXG4gICAgaWYgKCF0aGlzLl9pc1N3aXRjaCAmJiAhdGhpcy5faWNvbkRpciAmJiAhdGhpcy5fc3ZnRGlyICYmICF0aGlzLl9pbWdEaXIpIHtcclxuICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhlbCwgYCR7REVGQVVMVF9QUkVGSVh9ZGVmYXVsdGApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNUQVRFIEVMRU1cclxuICAgIGlmICh0aGlzLl9jb2xvciAmJiAhdGhpcy5faXNUb2dnbGUpIHtcclxuICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLl9zdGF0ZUVsZW0ubmF0aXZlRWxlbWVudCxcclxuICAgICAgICBgJHtERUZBVUxUX1BSRUZJWH0ke3RoaXMuX2NvbG9yfSR7dGhpcy5fb3V0bGluZSA/IERFRkFVTFRfT1VUTElORV9QUkVGSVggOiAnJ31gXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcblxyXG4gIC8vIC0tLS0tLS0tLS0gTUVUSE9EUyAtLS0tLS0tLS1cclxuICBwdWJsaWMgX29uQ2hhbmdlKGV2ZW50OiBFdmVudCwgY2hlY2tlZDogYm9vbGVhbiwgdmFsdWU6IHN0cmluZykge1xyXG4gICAgLy8gSSBzdG9wIHByb3BhZ2F0aW9uIG9uIHRoZSBjaGFuZ2UgZXZlbnQuXHJcbiAgICAvLyBPdGhlcndpc2UgdGhlIGNoYW5nZSBldmVudCwgZnJvbSB0aGUgaW5wdXQgZWxlbWVudCwgd2lsbCBidWJibGUgdXAgYW5kXHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIHRoaXMuY2hhbmdlLmVtaXQoeyB2YWx1ZSwgY2hlY2tlZCwgZXZlbnQgfSk7XHJcblxyXG4gICAgaWYgKHRoaXMucmFkaW9Hcm91cCkge1xyXG4gICAgICB0aGlzLnJhZGlvR3JvdXAuX2VtaXRDaGFuZ2UoeyB2YWx1ZSwgY2hlY2tlZCwgZXZlbnQgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IF9pc1RvZ2dsZSgpIHsgcmV0dXJuIHRoaXMuX3RvZ2dsZUNvbXBzLmxlbmd0aCA9PT0gMiB8fCB0aGlzLl90b2dnbGVXaWxsQ2hhbmdlQ29tcHMubGVuZ3RoID09PSAyOyB9XHJcbn1cclxuIl19